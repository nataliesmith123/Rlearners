---
title: "HPM R learners - Summer 2020"
output: 
  html_document: 
    theme: readable
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::read_chunk(here::here("code", "01_r-users-scheduling.r"))
```


# {.tabset}

Last Updated `r format(Sys.Date(), format="%m/%d/%Y")`

This will be the R learners website for the summer! Most all of my resources will be posted here. 

Contact: Natalie Smith natsmith@live.unc.edu

## Intro

We will meet regularly on Mondays from 11am-1pm. I'll spend 1 hour (max) reviewing the topic for that day and the different packages, etc. that are involved. The second hour will be working through examples and is totally optional -- you can feel free to work through the examples on your own whenever works for you. 

This will be very casual -- kids, pets, eating are all okay! Interrupt me anytime via chat or audio to ask questions and *please* tell me to slow down if necessary. 

#### First month of topics: 

+ June 1: Workflows in R - projects, scripts, and markdown files. Integration with GitHub -- what is git & why you should use it, and using GitHub pages to make easy-to-access html webpages for your projects!
+ June 8: What are R objects, and why do I have to care? Types of variables in R - factors! Begin data management in R -- using the `tidyverse`
+ June 15: Natalie unavailable -- take week off, or someone else lead a session? Descriptive statistics in R? Can share my code for this and people work independently, or someone else moderate? 
+ June 22: Begin plotting!
+ June 29: Continue plotting! 




#### Potential topics

+ Data management with the `tidyverse` package(s). Would probably suggest two weeks of this.
    + Types of variables in R -- factors are the most unique to R specifically
    + Merging, subsetting, and transposing data
    + Creating new variables
+ Working with objects in R - what are they, how, and why??? `r emo::ji("angry")`
+ Descriptive statistics in R
    + There are many, many packages - how to choose? 
    + Overview with `skimr`
    + Missing data with `naniar` package
    + Full tables with `tableone`
    + There's also `stargazer` and some others
+ Basic modeling - lm, logistic, others?
+ Other stat topics? 
+ Plotting with R - endless `ggplot2` options here! Can review all sorts of x-y plots, there are some new options for making maps. 
+ R projects, R markdown, GitHub, & GitHub pages (how I am making this website, very nice for collabs)


#### Meeting times

Some fun data management to wrangle our data into shape for graphing
```{r dm, message=FALSE, warning=FALSE}
```

Now let's make a beautiful graph. 
```{r graph}
```

We're going to go with Mondays from 11am-1pm -- this is what the most people wanted! 



## Getting started

Two general options for how to access and use R

1. Use R through R studio on your actual computer
    + Download R v4.0.0 [here](http://archive.linux.duke.edu/cran/)
    + Download R studio [here](https://rstudio.com/products/rstudio/download/#download)

2. Use [rstudio.cloud](rstudio.cloud) without the commitment of installing on your computer. *disclaimer: I don't know as much / anything about this*
    + Don't have to download R software and the R studio wrapper
    + Possibly less functional for all the bells and whistles -- not sure about GitHub integration, etc. But probably just fine for learning the basics, and much less potential annoyance with installations, etc. 

3. *Optional* Download [Git](https://git-scm.com/downloads) 
    + Git is the open source program that allows committing etc. 

4. *Optional* Make a [GitHub](https://github.com/) account
    + GitHub is where you push your commits to
    + Not necessary to use R. Is necessary to make a website (like this one) and use GitHub for collaborations, etc. 
    
5. *Optional* Download [GitHub Desktop](https://desktop.github.com/). 
    + This is an interface that makes git not-scary and allows you to easily commit, push, and pull from your online GitHub account.
    + R Studio also has an interface to do this directly. Either one works. There can be some annoyances with getting the Git tab in R Studio to work in my experience, and I like the interface of GitHub Desktop better. 


## Sessions {.tabset}

### June 8 - a smorgasboard

Now we'll dive into some of the nitty gritty of R! Goals for today are 1) understanding objects and types of 'things' in R, and 2) beginning data management. 

A variety of notes on objects

+ *My non-computer scientist opinion*: The term **object** is a catch-all for a 'thing' that is created. Objects are usually one kind of class and can include many different pieces ([Wikipedia](https://en.wikipedia.org/wiki/Object_(computer_science)) says "a combination of variables, functions, and data structures"). 
    + To me this means that datasets are objects -- their class is a dataset, and they contain variables. 
    + R will add some other common objects / classes. Here are a few examples: 
        + dataframes/datasets and [tibbles](https://tibble.tidyverse.org/reference/tbl_df-class.html) - a sub-type of dataframe. "tibbles are lazy and surly: they do less and complain more than base data.frames. This forces problems to be tackled earlier and more explicitly, typically leading to code that is more expressive and robust"
            + within these objects, each variable will have its own class. these can be: 
                + numeric (numbers with decimals)
                + integer (numbers without decimals)
                + character (words)
                + factor (numbers with assigned labels)
                + lists (yes, you can have a list-column -- very meta. also very useful sometimes!)
        + lists
            + one of the objects with the biggest learning curve (I think)
            + lists hold multiple things -- those things can be dataframes, vectors, etc.
            + understanding lists and how R works with them is a whole new world -- but is rapidly changing, so I'm hesitant to do too much with it now.
            + in my experience, iterating through a list is R's alternative to for loops (though you can still write for loops!). However, I've seen on twitter that new things are coming down the pipeline. 
        + ggplot objects (which are also kind of lists)
        + regression objects (which are also kind of lists)
        + matrices
        + vectors
    
    
```{r}
```




### June 1 - Workflows

Quotes for the day from Jenny Bryan

> Getting all the necessary software installed, configured, and playing nicely together is honestly half the battle when first adopting Git. 

> If the first line of your R script is `setwd("C:\Users\jenny\path\that\only\I\have")` I will come into your office and SET YOUR COMPUTER ON FIRE `r emo::ji("fire")`.


I'm going to walk through these items, and also show you examples of everything using the R learners folder/repository setup.  


#### Items to cover 

+ R & R Studio basics
    + R basics
        + Scripts
        + Different session options
        + Keyboard shortcuts
        + Install packages/libraries by `install.packages("LIBRARY_NAME")`
        + Load whole libraries like `library(LIBRARY_NAME)`
        + Use just one function from a library like `LIBRARY_NAME::FUNCTION` (helpful when you don't want the whole package, just one thing)
    + R projects
        + used to keep everything for one research project in order
            + generally, everyone on the team will have their own R project
            + add code from shared repository using Git/GitHub (more soon)
        + Global and project options -- see Resources for .Rdata suggestions (requirements? `r emo::ji("smile")`)
            + some options to help improve reproducibility and replicability within your and your team's workflows
        + Projects make relative file paths very easy. This allows for easy of switching computers, or multiple users working with the same code
            + Made even better with the `here` package! This function will look for an R project file, and then use that as the current directory and allows for easy manipulation of where to look for files. See `01_r-users-scheduling.R` for an example of its use, and there are some resources below.  

    
+ R markdown
    + Markdown language - simple to type, and then formats nicely
    + `File` > `New file` > `R Markdown`
    + I keep mine relatively plain for the easiest integration with GitHub pages
    + Can 'knit' to html (nicest looking), pdf, and word
    + Endless possibilities. I put some resources below -- I am constantly learning new things about markdown etc.!
    + Can pull in 'code chunks' from R scripts easily -- see this file for an example. 
        + make scripts. add `## @knitr CHUNK_NAME` before a code chunk
        + read the script-chunks into the R markdown file by adding something like `knitr::read_chunk(here::here("code", "01_r-users-scheduling.r"))`
        + then add a code chunk using the `Insert` button at the top right, and clicking `R`. 
        + add the chunks by modifying the first line of the chunk in the Markdown file to read ` ```{r CODE_CHUNK}`
        + I like to do this, but others also just write code directly in the Markdown file
    + R markdown files will knit in a new workspace every time, so really helpful to make sure you have consistent code flow, etc. 

    
+ Git and GitHub
    + Sort of like track changes for code
    + gitignore - **ALWAYS** ignore data folder if there is sensitive data!!!!!!!!!!!!!!!!!!!!
    + I often ignore whole folders, like data, resources, output, etc.
    + GitHub desktop gives an easy interface to right-click and add things to the gitignore folder.
    + Watch it in action
        1. Creating a repository online with .gitignore
            + Create a new project from version control repository
            + Make an edit
            + Commit changes
            + Push to repo
        2. Creating a repository in R Studio and publishing online
    
    
+ See what my general workflow looks like
    + Show personal R project for Rlearners
    + Folder structure -- see below
    + File naming convention (when applicable - show Aim 2 scripts) Generally I do ##_informative-title.R
    + Show Git/GitHub desktop interface (with R learners). The three things you will do all the time: 
        + committing
        + pushing
        + pulling
    
    
#### Exercises

+ Change your global and project options to not save Rdata
+ Packages
    + Install the `tidyverse` and `here` packages
    + Load those packages
+ Start your own project
    + Make your R project for something (associate with repository if interested, either online or on your local file)
    + Create a script doing something simple
    + Create an R markdown document and link code (or just code in the markdown document)
    + (if using Git) Commit & push to repository
    + (if using Git) try adding me to the repository -- I can try to clone it and pull/push! My github username is `nataliesmith123`
+ Collaborating on the R learners repository
    + Same thing, but with our R learners repository!
    + Check out the `index.Rmd` -- this is an R markdown document that we'll start talking about soon
    + Good habit when collaborating: Pull before starting any of your own work
        + Open project & pull anytime to get the latest and greatest things I've committed.





#### Session Specific Resources

+ [Happy Git and GitHub for the useR](https://happygitwithr.com/)
+ [Workflows vs. Projects](https://www.tidyverse.org/blog/2017/12/workflow-vs-script/)
+ [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/) by Yihui Xie
+ Markdown cheatsheet
    + [one](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet)
    + [two](https://holtzy.github.io/Pimp-my-rmd/)


My personal folder structure *starting point* -- usually has some modifications based on project requirements 


```{r}
knitr::include_graphics(here("docs", "folder-tree.png"))
```


## Resources

This is my own compilation of useful R tidbits that don't have a good place to live, and my go-to resources for various things in R. 


+ Tools > Global Options > General > Make sure the following things are done. Best practice for reproducible work!
    + 'restore .Rdata' is unchecked
    + saving .Rdata is set to 'Never'
    + 'always save history' is unchecked. 
+ Emojis in R markdown
    + Install by: `devtools::install_github("hadley/emo")` (need `devtools` package installed)
    + [emoji package](https://github.com/hadley/emo)
    + [Emoji search](https://emoji.muan.co/)
+ [Google it](https://twitter.com/andrewheiss/status/1263652454329208839)
+ Online resources
    + Intro to `naniar` package [here](https://allisonhorst.shinyapps.io/missingexplorer/#section-introduction)
    + *Very good* `ggplot` intro by [Andrew Heiss](https://twitter.com/andrewheiss) [here](https://datavizm20.classes.andrewheiss.com/). Also some `tidyverse` but not enough to fully understand it
    + R studio cheatsheets [here](https://rstudio.com/resources/cheatsheets/)
    + `here` package [link](https://github.com/jennybc/here_here)
    + `modelsummary` package for outputting regression models. thread on its use [here](https://twitter.com/VincentAB/status/1265794830682198016)
+ Guide for good coding in social sciences, from some economists [here](https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf). R is great because you can very easily do everything they suggest, and document with Rmd, and have more than one dataset open at a time `r emo::ji("fire")`
    + automation: functions are very easy in R
    + version control: git integrates well with R
    + directories: R projects
    + keys: not specific to software (keep data stored with identifiers)
    + abstraction: functions round 2
    + documentation: R markdown, easier options than local variables. 
+ `tidymodels` for machine learning - webiste [here](https://www.tidymodels.org/)
+ If you Twitter, here are some of my favorite people who regularly tweet extremely helpful R tips
    + [Sharla Gelfland](https://twitter.com/sharlagelfand)
    + [Allison Horst](https://twitter.com/allison_horst)
    + [Alison Presmanes Hill](https://twitter.com/apreshill)
    + [Hadley Wickham](https://twitter.com/hadleywickham)
    + [Jenny Bryan](https://twitter.com/JennyBryan)
    + [Julia Silge](https://twitter.com/juliasilge)
    + will add more as I remember! 
+ [Netlify drop](https://app.netlify.com/drop) for quick pub of R markdown files


